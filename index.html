<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Вычисление Выражений</title>
<style>
/* Добавьте сюда стили для красивого оформления вашего сайта */
body {
font-family: Arial, sans-serif;
background-color: #f7f7f7;
margin: 0;
padding: 20px;
}
.container {
max-width: 600px;
margin: auto;
background-color: #fff;
padding: 20px;
box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
</style>
</head>
<body>
<div class="container">
<h1>Вычисление Выражений</h1>
<!-- Сюда можно добавить дополнительный контент -->
</div>
<script>
function print(text) {
  console.log(text);
}

function error(text) {
  console.error(text);
}

function calculateExpressionsFromFile(filePath) {
  // Используем fetch API для загрузки файла
  fetch(filePath)
    .then(response => response.text())
    .then(data => {
      // Регулярное выражение для поиска выражений внутри <??>
      const regex = /<\?(.*?)\?>/g;
      let match;
      // Объект для хранения переменных
      let variables = {};

      // Перебираем все найденные выражения
      while ((match = regex.exec(data)) !== null) {
        try {
          const expression = match[1];
          // Вычисляем выражение и сохраняем результат в переменной
          const result = eval(expression);
          print(`Выражение: ${expression}, Результат: ${result}`);
        } catch (error) {
          error(`Ошибка при вычислении выражения: ${match[1]}`);
        }
      }

      // Регулярное выражение для создания переменных
      const varRegex = /var\s+(\w+)\s*=\s*(.*?);/g;
      while ((match = varRegex.exec(data)) !== null) {
        try {
          // Создаем переменную и присваиваем ей значение
          variables[match[1]] = eval(match[2]);
          print(`Переменная: ${match[1]}, Значение: ${variables[match[1]]}`);
        } catch (error) {
          error(`Ошибка при создании переменной: ${match[1]}`);
        }
      }

      // Выводим созданные переменные
      console.log(variables);
    })
    .catch(error => error('Ошибка при загрузке файла: ' + error));
}

// Вызываем функцию и передаем путь к файлу
calculateExpressionsFromFile('server.mx');

</script>
</body>
</html>


